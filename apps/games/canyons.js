/* globals cpcBasic */

"use strict";

cpcBasic.addItem("", function () { /*
1 rem canyons - Canyons of Cannons
2 rem (c)
3 rem
10 'CANYONS  (v1.0)
20 ENV 1,4,0,10,15,-1,75
30 ENT -1,1,0,10,10,10,1,10,-10,1,10,10,1,10,-10,1
40 ENV 2,10,-1,25
50 ENT 2,5,25,1
60 MODE 1:BORDER 9:INK 0,0:INK 1,3:INK 2,2:INK 3,14
100 WINDOW #1,8,33,4,18
110 LOCATE 8,1:PRINT CHR$(150);STRING$(24,154);CHR$(156)
120 LOCATE 8,3:PRINT CHR$(147);STRING$(24,154);CHR$(153)
130 LOCATE 8,2:PRINT CHR$(157)
140 LOCATE 33,2:PRINT CHR$(151)
150 PEN 3:LOCATE 12,2:PRINT"Canyons of Cannons"
170 FOR rand=4 TO 100 STEP 8  
180 MOVE rand,400:DRAW rand,rand,3  
200 DRAW 639-rand,rand,3:DRAW 639-rand,400,3:NEXT rand
230 PAPER #1,1:PEN #1,3:CLS#1
240 PRINT#1,"Namen der Spieler (max. 10 Buchstaben)"
250 INPUT #1,"1.Spieler:";name1$
260 IF LEN(name1$)>10 THEN name1$=LEFT$(name1$,10)
270 INPUT #1,"2.Spieler:";name2$ 
280 IF LEN(name2$)>10 THEN name2$=LEFT$(name2$,10) 
290 LOCATE #1,7,15:PRINT#1,"Spielerklaehrung"
300 PRINT#1,"Bei diesem Spiel geht es  darum,durch Eingabe des   Abschusswinkels und der   Geschwindigkeit,eine Kano-nenkugel so abzufeuern,"
310 PRINT#1,"dass der Gegner schnell   getroffen wird. Erst wird der Winkel und dann die   Geschwindigkeit eingegeben";
320 PRINT#1,"Geben sie nun an,bei wie- vielen Treffern einer der Spieler gewonnen hat.Die  Zahl kann zwischen 01 und 99 liegen.";CHR$(243);
330 ende$="":FOR eingabe=1 TO 2
350 e$=INKEY$:IF e$<"0" OR e$>"9" THEN 350
360 ende$=ende$+e$:PRINT#1,e$;
370 NEXT eingabe
380 PRINT#1,"Wert ok j/n"
390 WHILE INKEY(45)<>0
400 IF INKEY(46)=0 THEN 320
410 WEND
420 ende=VAL(ende$)
430 IF ende<1 THEN PEN#1,2:PRINT#1," UNKORREKT":PEN #1,3:GOTO 320
440 ende=ende-1
450 LOCATE #1,1,1:PRINT#1,STRING$(15,11)
510 SYMBOL AFTER 48
520 SYMBOL 48,0,28,34,34,68,68,56,0
530 SYMBOL 49,0,8,24,8,16,16,16,0
540 SYMBOL 50,0,28,34,12,16,32,124,0
550 SYMBOL 51,0,28,34,12,4,68,56,0
560 SYMBOL 52,0,12,2,36,126,8,8,0
570 SYMBOL 53,0,30,32,120,4,68,56,0
580 SYMBOL 54,0,14,16,44,68,68,56,0
590 SYMBOL 55,0,62,2,4,8,16,32,0
600 SYMBOL 56,0,24,36,56,72,72,48,0
610 SYMBOL 57,0,28,34,34,28,8,112,0
620 SYMBOL 255,195,129,129,129,129,129,129,255
630 INK 0,6:INK 1,12:INK 2,26:INK 3,0:INK 4,3,15:INK 5,26:INK 6,26:SPEED INK 10,5    
640 BORDER 0
710 FOR loesch=0 TO 400 STEP 2 
720 MOVE 0,loesch:DRAW 639,loesch,0:NEXT loesch
740 MODE 0:sp=INT(RND*2)+1
810 PEN 6
820 LOCATE 6,1:PRINT sieg1:LOCATE 18,1:PRINT sieg2
830 IF sieg1>ende OR sieg2>ende THEN 3010 
840 GOSUB 2230
1010 IF sp=2 THEN 1320
1030 PEN 6:LOCATE 1,1
1040 GOSUB 2620:winkel=a:PRINT",";:GOSUB 2620:gesch=a
1050 WHILE INKEY(18)<>0
1060 IF INKEY(79)=0 THEN 1030
1070 WEND
1120 GOSUB 2010
1130 xneu=kx1+20:yneu=ky1+19:GOSUB 2070
1160 IF pruef<2 OR pruef>3 THEN sp=0:GOSUB 2720:GOTO 1320
1170 IF xalt<320 THEN 1480
1180 sieg1=sieg1+1:sp=1
1210 SOUND 130,300,1000,15,1,1,15
1220 MOVE xalt,yalt:FOR radius=2 TO 20
1240 FOR kreis=0 TO 2*PI STEP PI/5
1250 x=radius*SIN(kreis)+xalt:y=radius*COS(kreis)+yalt
1260 IF INT(RND*300)<10 THEN farbe=2 ELSE farbe=4
1270 DRAW x,y,farbe:NEXT:NEXT:GOTO 810
1320 PEN 6:LOCATE 13,1
1330 GOSUB 2620:winkel=a:PRINT",";:GOSUB 2620:gesch=a  
1340 WHILE INKEY(18)<>0
1350 IF INKEY(79)=0 THEN 1320
1360 WEND
1410 GOSUB 2010:xzus=-xzus:xneu=kx2-2:yneu=ky2+19:GOSUB 2070 
1450 IF pruef<2 OR pruef>3 THEN sp=0:GOSUB 2720:GOTO 1030
1460 IF xalt>320 THEN 1180
1480 sieg2=sieg2+1:sp=2
1500 GOTO 1210
2010 DEG:winkel=-winkel
2020 xzus=gesch/10*COS(winkel)
2030 yzus=-gesch/10*SIN(winkel) 
2040 RAD:RETURN
2070 IF yneu>500 THEN 2120
2080 pruef=TEST(xneu,yneu)
2090 PLOT xneu,yneu,5:xalt=xneu:yalt=yneu
2120 xneu=xneu+xzus:yneu=yneu+yzus:yzus=yzus-0.1
2150 IF xneu<320 THEN st=129 ELSE st=132
2170 FOR warte=1 TO 5:NEXT warte 
2180 PLOT xalt,yalt,0
2190 IF xneu<0 OR xneu>640 OR yneu<0 THEN RETURN
2200 SOUND st,yneu,4,3
2210 IF pruef=0 THEN 2070
2220 RETURN
2230 RANDOMIZE TIME
2240 kx1=INT(RND*300)+1
2250 kx2=INT(RND*290)+330
2260 y=INT(RND*20)+50:y=y*15:y1=INT(RND*20)-20
2290 FOR x=0 TO 639 STEP 4
2300 IF x<320 THEN st=129 ELSE st=132   
2310 SOUND st,y/10,2,2
2320 MOVE x,0:DRAW x,y/15,1:DRAW x,300,0:RANDOMIZE TIME 
2360 IF x-kx1<20 THEN IF x-kx1>-1 THEN ky1=y/15:GOTO 2390
2370 IF x-kx2<20 THEN IF x-kx2>-1 THEN ky2=y/15:GOTO 2390 
2380 IF y+y1>80 THEN IF y+y1<3000 THEN y=y+y1 
2390 IF INT(RND*100)+1<10 THEN y1=INT(RND*100)-45
2400 NEXT
2410 x=kx1:y=ky1:GOSUB 2500:x=kx2:y=ky2:GOSUB 2560
2450 FOR y3=370 TO 378 STEP 2:MOVE 0,y3
2460 DRAW 639,y3,1:NEXT y3:RETURN
2500 FOR z=0 TO 8:MOVE x+z*2,y+z*2:DRAW x+6,y+z*2,3
2510 NEXT z:RETURN
2560 FOR z=0 TO 8:MOVE x+20-z*2,y+z*2:DRAW x+14,y+z*2,3 
2570 NEXT z:RETURN  
2620 x1$="00":FOR s=1 TO 2
2640 GOSUB 2700:x$=INKEY$:IF x$<"0" OR x$>"9" THEN 2640
2650 x1$=x1$+x$:PRINT x$;:NEXT s:a=VAL(x1$):RETURN
2700 PEN 3:PRINT CHR$(22);CHR$(1);CHR$(255);CHR$(22);CHR$(0);CHR$(8);:PEN 6:RETURN
2720 farbe=4:SOUND 130,4000,600,10,2,0,15
2740 FOR kreis=0 TO 2*PI STEP PI/10
2750 x=7*COS(kreis)+xalt:y=7*SIN(kreis)+yalt
2760 MOVE xalt,yalt:DRAW x,y,farbe:NEXT kreis
2790 IF farbe=0 THEN RETURN ELSE farbe=0:GOTO 2740
3010 RESTORE:GOSUB 3220
3020 IF sieg1>sieg2 THEN INK 2,26,0:sieg$=name1$ ELSE INK 3,0,26:sieg$=name2$
3030 WINDOW #1,6,15,7,14:PAPER #1,0:PEN #1,6
3040 PRINT#1,sieg$
3050 PRINT#1,"ist Sieger":PRINT#1  
3060 PRINT#1,"noch ein":PRINT#1,"Spiel ???"
3080 PRINT#1,"(j/n)"
3090 f$=INKEY$:IF f$<>"j" AND f$<>"n" THEN 3090
3100 IF f$="n" THEN LOCATE 1,1:PRINT STRING$(25,11):SYMBOL AFTER 0:END
3110 SYMBOL AFTER 0:RUN
3120 ' Melodie
3130 DATA 568,8,426,4,358,8,568,8,426,4,358,8,426,8,379,4
3140 DATA 379,5,379,16,379,0.5,358,8,319,4,319,8,319,8,284,4
3150 DATA 319,4,358,8,379,8,358,4,426,5,426,16,426,0.5,426,8
3160 DATA 319,2,319,4,319,4,319,4,253,4,319,4,358,2,358,4
3170 DATA 426,4,358,4,284,4,358,8,426,8,568,4,478,8,379,8
3180 DATA 319,4,319,8,478,8,426,4,426,4,426,1,426,2,426,8,319,2
3190 DATA 319,4,319,4,319,4,253,4,319,4,358,2,358,4,426,4
3200 DATA 358,4,284,4,358,8,426,8,568,4,478,8,379,8,379,4
3210 DATA 379,8,478,8,426,4,426,4,426,8,426,1
3220 FOR mel=1 TO 71
3230 IF mel=12 OR mel=24 OR mel=48 THEN GOSUB 3290
3240 READ no,la:ENV 3,7,-1,60/la:SOUND 1,no+100,25,11,3,2
3260 SOUND 4,no-100,25,11,3,2:NEXT mel:RETURN
3290 FOR st=1 TO 2:SOUND st^2,400,30,0:NEXT st:RETURN
*/ });

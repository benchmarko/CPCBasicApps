/* globals cpcBasic */

"use strict";

cpcBasic.addItem("", function () { /*
1 REM engelber - Engelbert
2 REM (c) John Kennedy, 1984
3 REM EN,SP: https://www.genesis8bit.fr/amstrad/game-rom/amstrad-game.php?prog_id=1584
4 REM
10 '
60 INK 0,0:BORDER 0
70 ENT -1,1,5,1
80 ENT -2,1,10,5
90 ENT -3,10,10,1,10,-12,1
100 ENV 1,15,-1,2
110 ENV 2,15,-1,10
120 ENV 3,15,-1,30
130 GOSUB 1800
140 hi=100
150 DIM bx(5),by(5)
160 DIM sh$(6),ts(6)
170 DIM nx(5),ny(5),ox(5),oy(5)
190 RESTORE 2680
200 FOR sh=1 TO 6
210 READ ts(sh)
220 READ x,y
230 IF x=99 THEN GOTO 260
240 sh$(sh)=sh$(sh)+CHR$(x)+CHR$(y)
250 GOTO 220
260 NEXT sh
270 INK 1,20:INK 2,13:INK 3,10
280 GOSUB 2810
290 GOSUB 3140
300 sc=0:li=9
310 sh=1
320 num=0
330 GOSUB 3080
340 RESTORE 360
350 FOR i=1 TO 15:READ col:INK i,col:NEXT i
360 DATA 20,13,10,17,17,17,17,6,14,17,17,7,7,7,7
370 FOR a=1 TO 50:PLOT INT(RND*639),INT(RND*300),1:NEXT a
380 x=11
390 TAGOFF
400 y=2
410 wes=0
420 PRINT CHR$(22);CHR$(1)
430 FOR q=1 TO LEN (sh$(sh)) STEP 2
440 x=ASC(MID$(sh$(sh),q,1))
450 y=ASC(MID$(sh$(sh),q+1,1))
460 GOSUB 520
470 NEXT q
480 '
490 '
500 PRINT CHR$(22);CHR$(0)
510 GOTO 750
520 '
530 LOCATE x,y
540 PEN 1
550 PRINT CHR$(214);CHR$(215)
560 LOCATE x,y+1
570 PRINT CHR$(213);CHR$(212)
580 PEN 2
590 LOCATE x,y+1
600 PRINT CHR$(215);
610 PEN 3
620 PRINT CHR$(214)
630 LOCATE x,y+2
640 PEN 2
650 PRINT CHR$(143);
660 PEN 3
670 PRINT CHR$(143);
680 LOCATE x,y+3
690 PEN 2
700 PRINT CHR$(213);
710 PEN 3
720 PRINT CHR$(212);
730 PEN 1
740 RETURN
750 '
760 FOR n=-15 TO 15
770 SOUND 1,ABS(n)*10,5,15,0,0,ABS(n)
780 NEXT n
790 wh=0
800 tot=0
810 LOCATE 1,1
820 PRINT"PUNKTE"
830 LOCATE 15,1
840 PRINT"BESTER";
850 LOCATE 16,2
860 PRINT hi;
870 LOCATE 7,25:PRINT"LEBEN:";li;
880 PRINT CHR$(23);CHR$(1)
890 TAG
900 qx=294:qy=108:qd=1
910 FOR q=0 TO 5:bx(q)=294:by(q)=388:NEXT q
920 q1$=CHR$(246)+CHR$(247)
930 q2$=CHR$(248)+CHR$(249)
940 b1$=CHR$(250)+CHR$(251)
950 b2$=CHR$(252)+CHR$(253)
960 fl=1:GOSUB 1090
970 clf=0
980 dead=0
990 '
1000 GOSUB 1180
1010 GOSUB 1930
1020 GOSUB 2440
1030 IF fl=1 OR dead=1 THEN GOTO 330
1040 GOSUB 1180
1050 GOSUB 2440
1060 IF fl=1 OR dead=1 THEN GOTO 330
1070 IF clf=1 THEN GOTO 2300
1080 GOTO 1000
1090 '
1100 PLOT 1000,1000,15
1110 IF fl=1 AND TEST(qx+20,qy-31)=1 THEN PLOT qx+20,qy-31,15:PLOTR 6,0:tot=tot+1:sc=sc+1:GOSUB 2380:IF tot=ts(sh) THEN clf=1
1120 IF wes=0 AND TEST(qx+12,qy-32)=0 THEN GOSUB 2170:RETURN
1130 MOVE qx,qy
1140 PRINT q1$;
1150 MOVE qx,qy-16
1160 PRINT q2$;
1170 RETURN
1180 '
1190 n=0
1200 while time<t!:call &bd19:wend:t!=time+50:j=JOY(0)
1210 IF (j AND 1)=1 AND (j AND 4)<>0 THEN n=1
1220 IF (j AND 1)=1 AND (j AND 8)<>0 THEN n=2
1230 IF (j AND 2)=2 AND (j AND 4)<>0 THEN n=3
1240 IF (j AND 2)=2 AND (j AND 8)<>0 THEN n=4
1250 IF INKEY(69)<>-1 THEN n=1
1260 IF INKEY(71)<>-1 THEN n=4
1270 IF INKEY(37)<>-1 THEN n=2
1280 IF INKEY(38)<>-1 THEN n=3
1290 IF n=0 THEN RETURN
1300 ON n GOSUB 1330,1440,1530,1620
1310 SOUND 4,0,2,15,0,0,5
1320 RETURN
1330 '
1340 GOSUB 1090
1350 qx=qx-16
1360 qy=qy+24
1370 GOSUB 1090:CALL &BD19:GOSUB 1090
1380 qx=qx-16
1390 qy=qy+24
1400 fl=1:GOSUB 1090
1410 RETURN
1420 qx=qx-16
1430 qy=qy-24
1440 '
1450 GOSUB 1090
1460 qx=qx+16
1470 qy=qy+24
1480 GOSUB 1090:CALL &BD19:GOSUB 1090
1490 qx=qx+16
1500 qy=qy+24
1510 fl=1:GOSUB 1090
1520 RETURN
1530 '
1540 GOSUB 1090
1550 qx=qx-16
1560 qy=qy-24
1570 GOSUB 1090:CALL &BD19:GOSUB 1090
1580 qx=qx-16
1590 qy=qy-24
1600 fl=1:GOSUB 1090
1610 RETURN
1620 '
1630 GOSUB 1090
1640 qx=qx+16
1650 qy=qy-24
1660 GOSUB 1090:CALL &BD19:GOSUB 1090
1670 qx=qx+16
1680 qy=qy-24
1690 fl=1:GOSUB 1090
1700 RETURN
1710 '
1720 IF er=1 AND TEST(xb+24,yb-24)<>5 THEN RETURN
1730 IF pr=1 AND TEST(xb+24,yb-24)=5 THEN RETURN
1740 PLOT 1000,1000,4
1750 MOVE xb,yb
1760 PRINT b1$;
1770 MOVE xb,yb-16
1780 PRINT b2$;
1790 RETURN
1800 '
1820 SYMBOL 250,0,3,13,13,19,47,47,47
1830 SYMBOL 251,0,192,240,240,248,252,252,252
1840 SYMBOL 252,63,63,63,63,31,31,31,15
1850 SYMBOL 253,252,252,252,252,248,248,240
1870 SYMBOL 246,3,7,5,7,7,15,31,63
1880 SYMBOL 247,192,224,160,224,224,224,224,96
1890 SYMBOL 248,30,3,1,1,1,1,1,2
1900 SYMBOL 249,96,224,192,64,64,64,64,128
1920 RETURN
1930 '
1940 FOR q=0 TO num
1950 IF INT(RND*2)=0 THEN GOTO 1980
1960 IF TEST(bx(q)-16,by(q)-60)>0 OR by(q)=100 THEN dir=-32 ELSE GOTO 1980
1970 GOTO 1990
1980 IF TEST(bx(q)+60,by(q)-60)>0 OR by(q)=100 THEN dir=+32 ELSE GOTO 1960
1990 ox(q)=bx(q):oy(q)=by(q)
2000 by(q)=by(q)-48
2010 bx(q)=bx(q)+dir
2020 IF by(q)=52 THEN by(q)=388:bx(q)=294:SOUND 130,500,0,15,2,2,0
2030 nx(q)=bx(q):ny(q)=by(q)
2040 NEXT q
2050 er=1:pr=0
2060 FOR q=0 TO num
2070 xb=ox(q):yb=oy(q)
2080 GOSUB 1710
2090 NEXT
2100 er=0:pr=1
2110 FOR q=0 TO num
2120 xb=nx(q):yb=ny(q)
2130 GOSUB 1710
2140 SOUND 129,800+(q*200)+(dir*4),0,15,1,1,0
2150 NEXT
2160 RETURN
2170 '
2180 IF dead=1 THEN RETURN
2190 dead=1
2200 INK 12,10:INK 13,13:INK 14,20
2210 SOUND 129,200,0,15,3,1,0
2220 SOUND 1,0,0,15,1,0,5
2230 FOR r=qy TO 0 STEP -12
2240 qy=r
2250 wes=1:fl=0
2260 GOSUB 1090:CALL &BD19:GOSUB 1090
2270 NEXT r
2280 FOR t=1 TO 40/10:call &bd19:NEXT t
2290 fl=0:wes=0:GOTO 2560
2300 '
2310 DI
2320 FOR a=-500 TO 500 STEP 20
2330 SOUND 1,ABS(a)+50,10,15,0,1
2340 NEXT a
2350 sh=sh+1
2360 IF sh=7 THEN sh=1:num=num+1
2370 GOTO 330
2380 '
2390 TAGOFF
2400 LOCATE 1,2
2410 PRINT sc
2420 TAG
2430 RETURN
2440 '
2450 fl=0
2460 FOR w=0 TO num
2470 IF qx=bx(w) AND qy-8=by(w) THEN fl=1
2480 NEXT w
2490 IF fl=0 THEN RETURN
2500 '
2510 MOVE qx+8,qy+16:PRINT"Aua!!";
2520 FOR q=1 TO 20
2530 SOUND 1,1000+INT(RND*500),8,1,1
2540 NEXT q
2550 SOUND 1,2000,0,15,1,1,5
2560 li=li-1:IF li<>0 THEN RETURN
2570 TAGOFF
2580 PRINT CHR$(22)+CHR$(1)
2590 PEN 4
2600 INK 4,5,20
2610 IF sc>hi THEN hi=sc
2620 LOCATE 7,13:PRINT" E N D E "
2630 PEN 1
2640 PRINT CHR$(22)+CHR$(0)
2650 IF INKEY$<>"" THEN 2650
2660 IF INKEY$="" THEN 2660
2670 GOTO 300
2680 '
2690 DATA 28
2700 DATA 10,2,9,5,11,5,8,8,10,8,12,8,7,11,9,11,11,11,13,11,6,14,8,14,10,14,12,14,14,14,5,17,7,17,9,17,11,17,13,17,15,17,4,20,6,20,8,20,10,20,12,20,14,20,16,20,99,99
2710 DATA 16
2720 DATA 10,2,9,5,11,5,6,8,8,8,12,8,14,8,5,11,7,11,13,11,15,11,8,14,12,14,9,17,11,17,10,20,99,99
2730 DATA 20
2740 DATA 10,2,9,5,11,5,8,8,12,8,7,11,13,11,6,14,14,14,5,17,7,17,9,17,11,17,13,17,15,17,8,20,10,20,12,20,6,20,14,20,99,99
2750 DATA 20
2760 DATA 6,2,8,2,10,2,12,2,14,2,7,5,9,5,11,5,13,5,8,8,10,8,12,8,9,11,11,11,10,14,9,17,11,17,8,20,10,20,12,20,99,99
2770 DATA 22
2780 DATA 10,2,9,5,11,5,8,8,12,8,7,11,13,11,6,14,14,14,5,17,7,17,9,17,11,17,13,17,15,17,4,20,6,20,8,20,10,20,12,20,14,20,16,20,99,99
2790 DATA 40
2800 DATA 6,2,8,2,10,2,12,2,14,2,7,5,9,5,11,5,13,5,5,5,6,8,8,8,10,8,12,8,14,8,16,8,5,11,7,11,9,11,11,11,13,11,15,11,6,14,8,14,10,14,12,14,14,14,16,14,5,17,7,17,9,17,11,17,13,17,15,17,6,20,8,20,10,20,12,20,14,20,16,20,99,99
2810 '
2820 MODE 0
2830 TAGOFF
2840 PRINT CHR$(22)+CHR$(1)
2850 FOR a=1 TO 50:PLOT INT(RND*640),INT(RND*400),1:NEXT a
2860 FOR a=1 TO 50
2870 x=INT(RND*19)+1:y=INT(RND*22)+1:GOSUB 520
2880 SOUND 129,INT(RND*640)+100,0,15,1,1
2890 NEXT a
2900 PEN 4
2910 INK 4,26,15
2920 PRINT CHR$(22)+CHR$(0)
2930 LOCATE 6,3
2940 PRINT"Engelbert"
2950 INK 5,20:PEN 5
2960 LOCATE 3,15
2970 PRINT"Von John Kennedy"
2980 SOUND 1,500,0,15,3,3
2990 FOR q=1 TO 2000:NEXT q
3000 FOR a=1 TO 5
3010 FOR b=26 TO 0 STEP -1
3020 INK a,ABS(b)
3030 SOUND 130,100+a*ABS(b),0,15,2,3
3040 if inkey$="" then FOR g=1 TO 2:CALL &BD19:NEXT
3050 NEXT:INK a,0:NEXT
3060 SOUND 4,0,0,15,3,0,15
3070 RETURN
3080 '
3090 FOR a=0 TO 25
3100 CALL &BC4D
3110 SOUND 135,(a+10*4),0,15,2,1
3120 NEXT
3130 RETURN
3140 '
3150 MODE 1
3160 PEN 1:INK 1,15
3170 INK 0,0:BORDER 0
3180 INK 2,11
3190 PAPER 2
3200 LOCATE 15,1
3210 PRINT SPC(11)
3220 LOCATE 15,2
3230 PRINT" ENGELBERT "
3240 LOCATE 15,3
3250 PRINT SPC(11)
3260 PAPER 0
3270 PRINT:PRINT:PRINT:PRINT
3280 PRINT" Engelbert muss auf der ganzen Pyramide  seine Fussabdruecke hinterlassen.  Be-  wege ihn mit dem Joystick."
3285 PRINT
3290 PRINT" Wenn Du das schaffst,  wird das Muster  schwieriger."
3295 PRINT
3300 PRINT" Wenn Du  von  den Stufen faellst  oder  auf einen Gummiball trittst, verlierst  Du ein Leben. Die Baelle versuchen im-  mer, auf Engelbert zu fallen. Pass gut  auf!"            
3340 PRINT:PRINT:PRINT:PRINT"       Bitte eine Taste druecken.       "       
3350 WHILE INKEY$="":WEND
3360 MODE 0
3370 RETURN
*/ });
